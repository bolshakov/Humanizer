<!doctype html>
<html lang="ru">
  <head>
    <meta charset="utf-8" />
    <title>Humanizer</title>
    <link rel="stylesheet" href="stylesheets/application.css" />
    <!--[if lt IE 9]>
      <script src="//html5shim.googlecode.com/svn/trunk/html5.js"></script>
      <style>
        h1 {
          clear: both;
        }
      </style>
    <![endif]-->
    <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Love+Ya+Like+A+Sister|Droid+Sans|Droid+Sans+Mono&amp;v2" >
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>
    <script src="javascripts/jquery.modalpop.js"></script>
    <script src="javascripts/chosen.jquery.min.js"></script>
    <script src="javascripts/underscore-min.js"></script>
    <link rel="stylesheet" href="stylesheets/chosen.css" />
    <script>
      $(function() {
        // Chosen locales
        var locales;
        var select    = $("#specify-locales select");
        var humanizer = "http://TweeKane.github.com/Humanizer";
        var uglify    = "http://marijnhaverbeke.nl/uglifyjs";

        $("[href=#specify-locales]").modalpop();
        $.getJSON("locales/index.json", function(locales) {
          // Compose languages list
          _(locales)
            .chain()
            // sort by language code, locale: [code, language]
            .sortBy(function(locale){
              return locale[0];
            })
            .each(function(locale) {
              var code     = locale[0];
              var language = locale[1];
              var option = $("<option value=\"" + code + "\">" + language + "</option>");
              select.append(option);
          });

          // fill locales if something chosen
          select.chosen().change(function(event) {
            locales = _(event.target)
              .chain()
              .filter(function(option) {
                return option.selected; })
              .pluck("value")
              .value();
          });

          $("[type=submit]").click(function() {
            var url = uglify + "?code_url=" + humanizer + "/javascripts/humanizer.js";
            _(locales).each(function(code) {
              url = url + "&amp;code_url=" + humanizer + "/locales/humanizer." + code + ".js"
            });
            url += "&amp;download=humanizer.custom.js";
            window.open(url);
          });
        });
      });
    </script>
  </head>
  <body>
    <header>
      <h1>Humanizer</h1>
      <h2>It’s Humanizer, baby!</h2>
    </header>
    <section>
      <h1>What is this?</h1>
      <p><a href="http://github.com">Humanizer</a> is a library, which
        knows how to measure approximate distance between the to given dates.
        For example, the difference between now and now &minus; 25 seconds ago
        is less than a minute — obvious, right?</p>

      <h1>Let me download!</h1>
      <ul id="downloads">
        <li><a class="button" href="http://marijnhaverbeke.nl/uglifyjs?code_url=http://TweeKane.github.com/Humanizer/javascripts/humanizer.js&&amp;code_url=http://TweeKane.github.com/Humanizer/locales/humanizer.en.js&amp;download=humanizer.min.js">Only English</a></li>
        <li><a class="button" href="#specify-locales">Specify locales</a></li>
      </ul>
      <div id="specify-locales" class="window">
        <form>
          <select multiple tabindex="0" title="Type language name">
          </select>
          <br/>
          <div class="buttons">
            <input class="close" type="button" value="Cancel" />
            <input type="submit" value="Download"/>
          </div>
        </form>
      </div>

      <h1>Usage</h1>
      <p>You can use Humanizer both at client side and server side.</p>

      <h2>In the browser</h2>
      <p>Simply include <code>humanizer.js</code> to your <code>&lt;head /&gt;</code>
        and don’t forget to include the locales you need:</p>
      <script src="https://gist.github.com/1102508.js?file=usage.html"></script>

      <h2>On the server</h2>
      <p>Include <code>humanizer</code> module, select locale and use it like
        in browser: </p>
      <script src="https://gist.github.com/1102508.js?file=server.coffee"></script>
    </section>
  </body>
</html>

